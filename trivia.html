<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Trivia Game</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Audiowide">
  <link rel="stylesheet"
    href="A.fonts,,_icomoon,,_style.css+css,,_owl.carousel.min.css+css,,_bootstrap.min.css+css,,_style.css,Mcc.iq-Irt1J63.css.pagespeed.cf.67EAq9-gxU.css">
  <link href="trivia.css" rel="stylesheet" type="text/css" />
</head>

<header class="site-navbar" role="banner">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-11 col-xl-2">
        <h1 class="mb-0 site-logo"><a href="index.html" class="text-black mb-0" style="color:black">SoC</a></h1>
      </div>
      <div class="col-12 col-md-10 d-none d-xl-block">
        <nav class="site-navigation position-relative text-right" role="navigation">
          <ul class="site-menu js-clone-nav mr-auto d-none d-lg-block">
            <li><a href="index.html" style="color: black"><span>Home</span></a></li>
            <li class="active"><a id='studentNav' style="display: hidden; color:black;"
                href="progression.html"><span>For
                  Students</span></a></li>
            <li><a id='teachersNav' style="display: hidden; color:black" href="teachers.html"><span>For
                  Teachers</span></a></li>

            <li><a href="about.html" style="color: black"><span>About Us</span></a></li>
            <li><a href="forum.html" style="color: black"><span>Forum</span></a></li>
            <li><a href="login.html" style="color: black"><span>Login</span></a></li>
          </ul>
        </nav>
      </div>
      <div class="d-inline-block d-xl-none ml-md-0 mr-auto py-3" style="position: relative; top: 3px;"><a href="#"
          class="site-menu-toggle js-menu-toggle text-white active"><span class="icon-menu h3"></span></a></div>
    </div>
  </div>

</header>


<body style="display: none">
  <!--   Nav Bar -->


  <!--   Made a div called main body -->
  <div id="mainBody">

    <!--these icons are for toggling the navigation bar
    <div id="iconBox"></div>
    <img id="xIcon" onclick="toggleOff()" src="https://cdn-icons-png.flaticon.com/512/1828/1828843.png">
    <img id="eyeIcon" onclick="toggleOn()" src="https://cdn-icons-png.flaticon.com/512/2867/2867280.png"> -->

    <!-- gamestart--easy or hard mode -->
    <div id="StartTriviaGame" class='rect'>
      <div class="title is-2" style="margin-top:75px;color: white;
  ">
        Computer Science Trivia
      </div>
      <div style="color: white;">
        Test your Computer Science knowledge!
      </div>
      <div class="triviaButs">
        <div class="title is-1 glow-on-hover" style="color: white;margin-right: 30px;
  " onclick="getQuestion('easy')">Easy</div>
        <div class="title is-1 glow-on-hover" style="color: white;margin-left: 30px;
  " onclick="getQuestion('medium')">Hard</div>
      </div>
    </div>
    <!--     game during -->
    <div id="triviaGame" class='rect hidden'>
      <div id="question" class="subtitle is-3  typewriter" style="margin-top:50px">

      </div>
      <div id="answer" class="subtitle is-4 typewriter" style="">

      </div>
      <div id="answer" class="subtitle is-4 typewriter" style="">

      </div>
      <div id="answer" class="subtitle is-4 typewriter" style="">

      </div>
      <div id="answer" class="subtitle is-4 typewriter" style="">

      </div>
      <div class="triviaButs">
        <div class="title is-2 glow-on-hover" style="color: white;margin-right: 20px;
  " onclick="restartGame()">Home</div>
        <div id="continue" class="title is-2 glow-on-hover hidden" style="color: white;margin-left: 20px;
  " onclick="continueGame()">Continue</div>
        <div id="finish" class="title is-2 glow-on-hover hidden" style="color: white;margin-left: 20px;
  " onclick="finish(); increaseLevel()">Finish!</div>
        <div id="triviaPoints" class="title is-2" style="color: white;margin-left: 20px;
  ">Points: 0/3</div>

      </div>
    </div>
  </div>

  <!--   game end --Incomplete. (was thinking roulette wheel with prizes (points)-->

  <div id='secondBody' style='position:absolute; top:27%;'>
    <div class='floating' id="leaderboard">
      <h2 id='leaderboardTitle' class="neonText">Leaderboard</h2>
      <h3 class='l' id="score0"></h3>
      <h3 class='l' id="score1"></h3>
      <h3 class='l' id="score2"></h3>
      <h3 class='l' id="score3"></h3>
      <h3 class='l' id="score4"></h3>
    </div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/8.0/firebase.js"></script>
  <script src="trivia.js" defer></script>
  <script src="https://replit.com/public/js/replit-badge.js" theme="blue" defer></script>
</body>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
  integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.9.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

<script>

  const firebaseConfig = {
    apiKey: "AIzaSyDeaWpE9wc6VvPEilrEAqhEnjKo8ik1Stw",
    authDomain: "cssifinal-884f2.firebaseapp.com",
    projectId: "cssifinal-884f2",
    storageBucket: "cssifinal-884f2.appspot.com",
    messagingSenderId: "331915175322",
    appId: "1:331915175322:web:ab968dfdccc693e2094623",
    measurementId: "G-LB249TWWMB"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  function increaseLevel() {
    firebase.auth().onAuthStateChanged((user) => {
      if (user) {
        console.log("logged in");
        async function updateLevel() {

          let user = firebase.auth().currentUser;
          let userID = user.uid;
          let docRef = db.collection("user-data").doc(userID);
          let doc = await docRef.get();
          var data = "";
          if (doc.exists) {
            data = doc.data().level;
            console.log(data);
          }
          if (data == 4) {
            let newLevel = docRef.update({level: data + 1});
            console.log(newLevel);
          }


        }

        updateLevel();

      }
      else {
        console.log("logged out");
      }
    });
  }
  //call this lien to increase level by
  // increaseLevel();

  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
      console.log("logged in");
      var data = "";
      async function getLevel() {

        let user = firebase.auth().currentUser;
        let userID = user.uid;
        let docRef = db.collection("user-data").doc(userID);
        let doc = await docRef.get();

        if (doc.exists) {
          data = doc.data().level;
          console.log(data);

          if (data < 4) {
            console.log("no access");
            window.location.href = "progression.html";
          }
          document.body.style.display = "block";

        }
      }
      getLevel();
    }
    else {
      window.location.href = "index.html";
      console.log("logged out");
    }
  });

</script>



</html>