<!-- I curreclty have the clear buttons disabled a sthey broke the css for some reason -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Work</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet"
    href="A.fonts,,_icomoon,,_style.css+css,,_owl.carousel.min.css+css,,_bootstrap.min.css+css,,_style.css,Mcc.iq-Irt1J63.css.pagespeed.cf.67EAq9-gxU.css">
  
  <script src="editor/acorn.js"></script>
  <script src="editor/interpreter.js"></script>
  <script src="editor/babel.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/php.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/purebasic.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/highlightjs-line-numbers.js@2.8.0/dist/highlightjs-line-numbers.min.js"></script>
  <script>
      hljs.initHighlightingOnLoad();
      hljs.initLineNumbersOnLoad();
  </script>
    <style>
/*       I edited the body to scroll */
        html, body {
            height: 200%;
            width: 100%;
            overflow: scroll;
        }
      h1,h2,h3,h4,h5,h6{
        margin: 0 auto; width: auto; text-align: center;
      }
      p{
        margin-left: 30%; margin-right: 30%; text-align: center; color: black;
      }
        .hljs {
            background: lightgrey;

            margin-left: 30%;

            height: 100%;
        }
      .results{
        background: black; 
        margin-right: 30%;  
        color: white; 
        padding: 6.5px;
      }
        .parent {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          grid-template-rows: 1fr;
          grid-column-gap: 0px;
          grid-row-gap: 0px;
        }
      .center {
  margin: auto;
  width: 50%;
  border: 3px solid green;
  padding: 10px;
}
    </style>

</head>

   <header class="site-navbar" role="banner">
    <div class="container" >
      <div class="row align-items-center" >
        <div class="col-11 col-xl-2">
          <h1 class="mb-0 site-logo"><a href="index.html" class="text-black mb-0" style="color: black">SOC</a></h1>
        </div>
        <div class="col-12 col-md-10 d-none d-xl-block">
          <nav class="site-navigation position-relative text-right" role="navigation">
            <ul class="site-menu js-clone-nav mr-auto d-none d-lg-block">
              <li class="active"><a href="index.html"><span style="color: black">Home</span></a></li>
              <li><a id='studentNav' style="display: hidden;" href="progression.html" ><span style="color: black">For Students</span></a></li>
              <li><a id='teachersNav' style="display: hidden;" href="teachers.html"><span style="color: black">For Teachers</span></a></li>

              <li><a href="about.html" ><span style="color: black" >About Us</span></a></li>
              <li><a href="forum.html" ><span style="color: black">Forum</span></a></li>
              <li><a href="login.html" ><span style="color: black">Login</span></a></li>
            </ul>
          </nav>
        </div>
        <div class="d-inline-block d-xl-none ml-md-0 mr-auto py-3" style="position: relative; top: 3px;"><a href="#"
            class="site-menu-toggle js-menu-toggle text-white active"><span class="icon-menu h3"></span></a></div>
      </div>
    </div>

  </header>
  
<body style="overflow: visible; display: none">
  <br>
  <br>
  <br>
  <br>
  <br>

<h1 style="margin: 0 auto; width: auto; text-align: center;">Lesson 1: Variables</h1>
  <br>
  <br>
  <h4>There are 4 main data types in Javascript String, Number, Boolean, and Null</h4>
<br>
  
<div class="parent">
  <pre><code id="editor1" class="Javascript editor" contentEditable="true">let variable1 = "Hello and Welcome"; <br>let variable2 = 12345; <br>let variable3 = true; <br>let variable4 = null; <br>console.log(variable1 + " " + variable2 + " " + variable3 + " " + variable4); <br><br></code></pre>
  
  <div class="results" id="result1"></div>

</div>
<div style="margin: 0 auto; width: 656px; text-align: center;">
  <br>
  <button class="btn btn-success" id="run1" style="width: 15%">Run</button>
<!--   <button id="clear1" class="btn btn-warning" style="width: 15%">Clear</button> -->
</div>
  
<br>
  <br>
  <h4>You can declare a variable with 'let', 'var', or 'const'</h4>
  <br>
  <p>They are are similar in how you initially declare the variable but they change after that. 'let' is used to declare a variable you will change later. 'var' is used to declare a variable change later but anywhere in your program. 'const' is used to declare a varaible that will NOT be changed later. For the duartaion of this lesson we will use 'let' to declare our variables.</p>
<br>
  
  <div class="parent">
  <pre><code id="editor2" class="Javascript editor" contentEditable="true">let variable1 = "Hi"; <br>var variable2 = "Hi"; <br>const variable3 = "Hi"; <br>console.log(variable1 + " " + variable2 + " " + variable3); <br><br><br></code></pre>
  
  <div class="results" id="result2"></div>

</div>
<div style="margin: 0 auto; width: 656px; text-align: center;">
  <br>
  <button class="btn btn-success" id="run2" style="width: 15%">Run</button>
<!--   <button id="clear2" class="btn btn-warning" style="width: 15%">Clear</button> -->
</div>

<br>

  <h4>Mathematical Operations</h4>
  <p>Javascript can divide ( / ), multiply ( * ), add ( + ), and subtract ( - ) numbers.<br>
  Variables can be used to store the result of an equation.  You can even do calculations with<br> variables containing number values!<p>
    
      <p>Try using console.log() to log the variable, 'total', to the console!</p>
    <p>What might if you tried adding total to another number?  Try logging the results to the console!</p>
  
 <div class="parent">
  <pre><code id="editor3" class="Javascript editor" contentEditable="true">console.log(2+4); <br>let total = 2 + 4;<br><br><br><br><br></code></pre>
  
  <div class="results" id="result3"></div>

</div>
<div style="margin: 0 auto; width: 656px; text-align: center;">
  <br>
  <button class="btn btn-success" id="run3" style="width: 15%">Run</button>
<!--   <button id="clear3" class="btn btn-warning" style="width: 15%">Clear</button> -->
</div>

<br>

 <h5>Activity: Grocery List</h5>
  <p>Amy goes to the store and has decided to buy some fruit.  She has already added 5 apples,
  2 pears, and 1 turkey to the cart.</p>
      <p>press run to double check what's in Amy's cart.</p>
    <p>Amy has decided she would like to add 4 bananas to her cart.  Create a new variable
      called 'banana' and set it equal to 4!  Don't forget to log the new variable to the console.</p>
  <p>Now Amy wants a 2nd turkey.  Modify the turkey variable from 2 to 1.  What happens to the output?</p>
  <p>Challenge:Amy is really indecisive.  Add 3 hams and 6 pineapples</p>
  
 <div class="parent">
  <pre><code id="editor4" class="Javascript editor" contentEditable="true">let apple = 5;<br>let pear = 2;<br>let turkey = 1;<br>console.log("Amy Grocery List:");<br>console.log("apples:" + apple);<br>console.log("pears:" + pear);<br>console.log("turkeys:" + turkey);<br><br></code></pre>
  
  <div class="results" id="result4"></div>

</div>
<div style="margin: 0 auto; width: 656px; text-align: center;">
  <br>
  <button class="btn btn-success" id="run4" style="width: 15%">Run</button>
<!--   <button id="clear4" class="btn btn-warning" style="width: 15%">Clear</button> -->
</div>
  <br>
<h6>Note on Naming Variables</h6>
  <p style='font-size:13px;'>Variable names are very important.  Imagine if in the previous exercise, the variable storing
  apples was called 'pears' and the turkey variable was called 'lemons'!  Now, logging or adding to the apple variable becomes less simple, and keeping track of all the foods becomes difficult.
  Make sure your variables' names reflect their content or purpose, and are easy to remember!</p>
  <br>
  
  <h4 style='font-size:15px;'>Working with Variables</h4><br>
  <p> Variables can be used in a variety of different ways.  The example code below are just a few examples!  Try running the code and notice the output.  Experiment with the examples, or try out some fo the challenges below:</p><
  <p style='height:130px; overflow-y:scroll; background-color:rgb(217, 233, 255)'>
    1. a) In the rectangle example, change the width of rect1 and rect2 to 10.  Run the code and see
    how the rectangles' areas change...<br><br> b) Why is it that rect2's area changes when width is changes, but rect1's area doesn't change?[if you're stuck, consider trying to change rect1's area to [rect1Width*rect1Height]]<br><br>c)try making variables to calculate the area of a triangle!  Log your triangle to the console <br><br>2. a)In the Greeting example, change the variable, 'name', to your name.  Run and see the result!<br><br>b) Try finding where to add the variable 'sayHello' to the console.log so that the console prints, 'Hey, how is it going John Smith?'<br><br>c)create a variable for the weather and find a way to log a phrase describing the weather.
  </p>
  <br>
   <div class="parent">
  <pre><code id="editor5" class="Javascript editor" contentEditable="true">let rect1Area = 30;<br>let rect1Height = 5;<br>let rect1Width = 6;<br>let rect2Area = 30;<br>let rect2Height = 5;<br>let rect2Width = 6;<br><br>console.log('Rectangle Example:');<br>console.log('rect1Area = ' + rect1Area);<br>console.log('rect2Area = ' + rect2Area);<br><br>let name = 'John';<br>let sayHello = 'Hello, ';<br><br>console.log('Greeting Example: ');<br>console.log('How is it going ' + name + '?');
    </code></pre>
  
  <div class="results" id="result5"></div>

</div>
<div style="margin: 0 auto; width: 656px; text-align: center;">
  <br>
  <button class="btn btn-success" id="run5" style="width: 15%">Run</button>
<!--   <button id="clear5" class="btn btn-warning" style="width: 15%">Clear</button> -->
</div> 
  
</body>

<!--   you need to copy these -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.9.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  
  <script>

function resizeEditor() { 
  var divs = document.getElementsByClassName("results"); 
  for (var i = 0; i < divs.length; i++) {
    // console.log(divs[i].style.height);
    // console.log(divs[i].clientHeight);
    console.log((divs[i].clientHeight - 14) + "px");
    divs[i].style.height = (divs[i].clientHeight - 2) + "px"; 
  } 
}
    resizeEditor();

    
    
function getCode(num) {
  console.log(num);
  let result = "result"+num;
  let editor = "editor"+num;
  console.log(editor,result);
    //clear result
    document.getElementById(result).innerHTML = "";
    // console.oldLog = console.log.bind(console);
    // console.log = function(value)
    // {
    //     document.getElementById("result").innerHTML += value + "<br>";
    //     console.oldLog(value);
    //     return value;
    // };

    //prevent eval if gl
    // var code = document.getElementById("editor").innerHTML.replace(/<span.*?>/g, "").replace(/<\/span>/g, "") + document.getElementById("editor").innerHTML.replace(/<span.*?>/g, "").replace(/<\/span>/g, "");
    //replace all the div tags in code with nothing

  //TODO: maybe add back
    var code = document.getElementById(editor).innerHTML;
  console.log(code);
  // code = code.replace(/<span.*?>/g, "").replace(/<\/span>/g, "");
// let code;
  
    // code = code.replace(/<div.*?>/g, "").replace(/<\/div>/g, "");
    // code = code.replace(/<pre.*?>/g, "").replace(/<\/pre>/g, "");
    // code = code.replace(/<code.*?>/g, "").replace(/<\/code>/g, "");
   //comvert &gt; to > and &lt; to < and &amp; to & and &quot; to " and &apos; to "' and &nbsp; to " " and &#xA; to "\n" and &#xD; to "\r" and &#x9; to "\t"
    code = code.replace(/&gt;/g, ">").replace(/&lt;/g, "<").replace(/&amp;/g, "&").replace(/&quot;/g, "\"").replace(/&apos;/g, "'").replace(/&nbsp;/g, " ").replace(/&#xA;/g, "\n").replace(/&#xD;/g, "\r").replace(/&#x9;/g, "\t");

    // code = code.replace(/<br>/g, "");
    //add new line after every } or{
    code = code.replace(/{/g, "{\n");
    code = code.replace(/}/g, "}\n");

    //replace all html tags with nothing
    code = code.replace(/<.*?>/g, "");
    //add a new line after every ;
    code = code.replace(/;/g, ";\n");

    code = Babel.transform(code, {'presets': ['es2015']}).code;

    console.log('converted code: \n ',code);
    // console.log(code.substr(15))
// alert(code);



    var initFunc = function(interpreter, globalObject) {
        // Create 'console' global object.
        var pseudoConsole = interpreter.nativeToPseudo({});
        interpreter.setProperty(globalObject, 'console', pseudoConsole);

        // Define 'console.log' function.
        var wrapper = function log(value) {
            document.getElementById(result).innerHTML += value + "<br>";
            return console.log('value',value);
        };
        interpreter.setProperty(pseudoConsole, 'log',
            interpreter.createNativeFunction(wrapper));
    };
    try {
    var myInterpreter = new Interpreter(code, initFunc);

        myInterpreter.run();
    }
    catch (e) {
        document.getElementById(result).innerHTML = e.toString();
        console.log('result',e);
    }

}



document.getElementById("run1").addEventListener("click", function() {
  console.log('click1'); 
  getCode(1);
});

// document.getElementById("clear1").addEventListener("click", function() {
//     document.getElementById("result1").innerHTML = "";
//   document.getElementById("editor1").innerHTML = "";
//   resizeEditor();
// });

   document.getElementById("run2").addEventListener("click", function() {
  console.log('click2'); 
  getCode(2);
});

    document.getElementById("run3").addEventListener("click", function() {
  console.log('click3'); 
  getCode(3);
});

    document.getElementById("run4").addEventListener("click", function() {
  console.log('click4'); 
  getCode(4);
});

    document.getElementById("run5").addEventListener("click", function() {
  console.log('click5'); 
  getCode(5);
});
// document.getElementById("clear2").addEventListener("click", function() {
//     document.getElementById("result2").innerHTML = "";
//   document.getElementById("editor2").innerHTML = "";
//   resizeEditor();
// });

    
  const firebaseConfig = {
    apiKey: "AIzaSyDeaWpE9wc6VvPEilrEAqhEnjKo8ik1Stw",
    authDomain: "cssifinal-884f2.firebaseapp.com",
    projectId: "cssifinal-884f2",
    storageBucket: "cssifinal-884f2.appspot.com",
    messagingSenderId: "331915175322",
    appId: "1:331915175322:web:ab968dfdccc693e2094623",
    measurementId: "G-LB249TWWMB"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
function increaseLevel(){
firebase.auth().onAuthStateChanged((user) => {
  if (user) {
     console.log("logged in");
    async function updateLevel(){
      
      let user = firebase.auth().currentUser;
      let userID = user.uid;
      let docRef = db.collection("user-data").doc(userID);
      let doc = await docRef.get();
      var data = "";
      if(doc.exists){
         data = doc.data().level;
        console.log(data);
      }
      let newLevel = docRef.update({level: data+1});
      console.log(newLevel);


      
  }
    
    updateLevel();
    
        }
  else{
    console.log("logged out");
  }
      });
}
   //call this lien to increase level by
    // increaseLevel();

    firebase.auth().onAuthStateChanged((user) => {
  if (user) {
     console.log("logged in");
     var data = "";
    async function getLevel(){
      
      let user = firebase.auth().currentUser;
      let userID = user.uid;
      let docRef = db.collection("user-data").doc(userID);
      let doc = await docRef.get();
     
      if(doc.exists){
         data = doc.data().level;
        console.log(data);

        if(data <1){
          window.location.href = "progression.html";
        }
        document.body.style.display = "block";
         
        
      }
  }
    getLevel();
  }
  else{
    window.location.href = "index.html";
    console.log("logged out");
  }
      });

  </script>

<!--   <script src="enforcelogin.js"></script> -->
</html>