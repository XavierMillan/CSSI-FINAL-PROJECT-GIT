<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Lesson 2</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet"
    href="A.fonts,,_icomoon,,_style.css+css,,_owl.carousel.min.css+css,,_bootstrap.min.css+css,,_style.css,Mcc.iq-Irt1J63.css.pagespeed.cf.67EAq9-gxU.css">

  <script src="editor/acorn.js"></script>
  <script src="editor/interpreter.js"></script>
  <script src="editor/babel.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/languages/php.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/purebasic.min.css" />
  <script
    src="//cdnjs.cloudflare.com/ajax/libs/highlightjs-line-numbers.js/2.8.0/highlightjs-line-numbers.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/highlightjs-line-numbers.js@2.8.0/dist/highlightjs-line-numbers.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
  </script>
  <style>
    html,
    body {
      height: 210%;
      width: 100%;
      overflow: scroll;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 0 auto;
      width: auto;
      text-align: center;
    }

    p {
      margin-left: 30%;
      margin-right: 30%;
      text-align: center;
      color: black;
    }

    .hljs {
      background: lightgrey;

      margin-left: 30%;

      height: 100%;
    }

    .results {
      background: black;
      margin-right: 30%;
      color: white;
      padding: 6.5px;
    }

    .parent {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: 1fr;
      grid-column-gap: 0px;
      grid-row-gap: 0px;
    }

    .preMargin {
      margin-bottom: 0;
    }

    .center {
      margin: auto;
      width: 50%;
      border: 3px solid green;
      padding: 10px;
    }
  </style>

</head>

<header class="site-navbar" role="banner">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-11 col-xl-2">
        <h1 class="mb-0 site-logo"><a href="index.html" class="text-black mb-0" style="color: black">SOC</a></h1>
      </div>
      <div class="col-12 col-md-10 d-none d-xl-block">
        <nav class="site-navigation position-relative text-right" role="navigation">
          <ul class="site-menu js-clone-nav mr-auto d-none d-lg-block">
            <li><a href="index.html"><span style="color: black">Home</span></a></li>
            <li class="active"><a id='studentNav' style="display: hidden;" href="progression.html"><span style="color: black">For
                  Students</span></a></li>
            <li><a id='teachersNav' style="display: hidden;" href="teachers.html"><span style="color: black">For
                  Teachers</span></a></li>

            <li><a href="about.html"><span style="color: black">About Us</span></a></li>
            <li><a href="forum.html"><span style="color: black">Forum</span></a></li>
            <li><a href="login.html" id="account"><span style="color: black">Login</span></a></li>
          </ul>
        </nav>
      </div>
      <div class="d-inline-block d-xl-none ml-md-0 mr-auto py-3" style="position: relative; top: 3px;"><a href="#"
          class="site-menu-toggle js-menu-toggle text-white active"><span class="icon-menu h3"></span></a></div>
    </div>
  </div>

</header>

<body style="overflow: visible; display: none">
  <br>
  <br>
  <br>
  <br>
  <br>
  <h1 style="margin: 0 auto; width: auto; text-align: center;">Lesson 2: if statements</h1>
  <br>
  <br>
  <h4>Creating Conditional Statements with Variables</h4>
  <br>
   <div style="margin: 0 auto; width: 656px; text-align: center;">
 <a href="https://cssi-main.xavim1.repl.co/forum.html?postid=1659583728012.I4PKXme0uqXYmvEymdTMj1sARy33"><button class="btn btn-primary" id="help" style="width: 20%" >Need Help</button></a>
  </div>
  <br>
  <p>By the end of they day, you will be able to use conditional statements to return different values to the console!
    In the code example below, set the 'age' variable to your age!</p>

  <div class="parent">

    <pre
      class='preMargin'><code id="editor1" class="Javascript editor" contentEditable="true">let age=10;<br>if(age < 10){<br>  console.log("you are younger than 10!")<br>} else if (age > 10) {<br>  console.log("you are older than 10")<br>} else {<br>  console.log("you are 10!")<br>};</code></pre>

    <div class="results" id="result1"></div>

  </div>
  <div style="margin: 0 auto; width: 656px; text-align: center;">
    <br>
    <button class="btn btn-success" id="run1" style="width: 15%">Run</button>
<!--     <button id="clear1" class="btn btn-warning" style="width: 15%">Clear</button> -->
  </div>

  <br>
  <h5>Comparison Operators</h5><br>
  <p>Comparison operators can be used to compare to values. It is much like making an assumption (for example: apples
    equals carrots, apples == carrots), and then evaluating the truth of the matter (for example: do apples equal
    carrots? No, apples == carrots is a <b>false</b> statement!
    Run the code below and notice that the result confirms that your statement is <b>true</b> or <b>false</b></p>
  <p>challenge: Try adding a '!' in front of every comparison (ex. console.log(!1==1)). How does the result change?</p>
  <br>
  <div class="parent">
    <pre
      class='preMargin'><code id="editor2" class="Javascript editor" contentEditable="true">console.log(1 === 2);<br>console.log(1 === 1);<br>console.log(1 < 1);<br>console.log(1 < 2);<br>console.log(1 >= 1);<br>console.log(1 >= 2);<br><br></code></pre>

    <div class="results" id="result2"></div>

  </div>
  <div style="margin: 0 auto; width: 656px; text-align: center;">
    <br>
    <button class="btn btn-success" id="run2" style="width: 15%">Run</button>
<!--     <button id="clear2" class="btn btn-warning" style="width: 15%">Clear</button> -->

  </div>

  <br>
  <h5>Comparing Strings</h5><br>
  <p>Comparison Operators can be used to compare strings, too! Check out the example code below. Run the code and see
    what happens. The variable 'favoriteColor' is set to 'blue'. 'yourGuess' is set to 'red.' Below the variables, an if
    statement checks if it is <b>true</b> that 'favoriteColor' is equal to 'yourGuess.' Since 'blue' does <b>not
      equal</b> 'red,' the statement is <b>false</b>, and the code within the brackets ({}) is not executed!</p>
  <p>Try the exercises below for additional practice!</p>

  <p style='height:130px; overflow-y:scroll; background-color:rgb(217, 233, 255)'>
    1.Change variable 'yourGuess' to equal 'blue.' Run the program. What change and why?<br><br>2.Change 'yourGuess'
    again; this time, to 'BLUE' in capital letters. Run the program now. Can you guess why the if statement evaluated to
    false? <br><br> hint: it can help to replace the variable names- (yourGuess === favorite Color) to the variables'
    values- ('BLUE'==='blue')<br><br>3.Challenge: Try to make your own conditional statement. Replace the value at
    'favoriteColor' to your favorite color, customize a string in the console.log statement within the if statement.
  </p>
  <br>
  <div class="parent">
    <pre
      class='preMargin'><code id="editor3" class="Javascript editor" contentEditable="true">let favoriteColor='blue';<br>let yourGuess='red';<br><br>if(yourGuess === favoriteColor){<br>console.log("you guessed my favorite color!")};<br><br></code></pre>

    <div class="results" id="result3"></div>

  </div>
  <div style="margin: 0 auto; width: 656px; text-align: center;">
    <br>
    <button class="btn btn-success" id="run3" style="width: 15%">Run</button>
<!--     <button id="clear3" class="btn btn-warning" style="width: 15%">Clear</button> -->
  </div>

  <br>

  <h5>Activity: Party Planner</h5><br>
  <p>Carol is an event planner. She expects 20 guests, and she currently has 10 cups and 30 plates. She has declared
    these as variables. Carol wants at least 1 cup and 1 plate for each guest. The if statements check if Carol will
    have at least as many plates as she has guests (greater than or equal to, >=). Try running the code and then try the
    tasks below:</p>

  <p style='height:130px; overflow-y:scroll; background-color:rgb(228, 217, 255)'>
    1. Carol has realized she actually only has 15 plates. Change the 'plates' variable to equal 15 and run the program
    again. What has changed? <br><br>2. A tornado blew over and now only 10 guests can make it! Edit the guests variable
    to equal 10. Run the program again. Can you figure out why the if statements evaluated true? <br><br>3. CHALLENGE:
    Carol decided she actually wants every guest to have TWO plates. See if you can change the plates' if statement so
    that the statement checks if every guest has two plates! <br>(hint: the division symbol is '/' and the
    multiplication symbol is '*)<br><br>4.DOUBLE CHALLENGE: Edit the variables to plan your own party. Choose how many
    guests their will by and add some new party supplies (like hats or cake!) Create some new if statements to check if
    you will have enough of each party supply.
  </p><br>
  <div class="parent">
    <pre
      class='preMargin'><code id="editor4" class="Javascript editor" contentEditable="true">let guests = 20;<br>let plates = 30;<br>let cups = 10;<br><br>if(plates >= guests){<br>  console.log("Carol has enough plates!")<br>} else {<br>  console.log("Carol is short this many<br> plates:" + (guests - plates))<br>};<br><br>if(cups >= guests){<br>  console.log("Carol has enough cups!")<br>} else {<br>  console.log("Carol is short this many<br> cups:" + (guests - cups))<br>};</code></pre>

    <div class="results" id="result4"></div>

  </div>
  <div style="margin: 0 auto; width: 656px; text-align: center;">
    <br>
    <button class="btn btn-success" id="run4" style="width: 15%">Run</button>
<!--     <button id="clear4" class="btn btn-warning" style="width: 15%">Clear</button> -->
  </div>

  <br>

  <h5>If vs. Else vs. Else If</h5><br>
  <p>Throughout the lesson, you've seen conditional statements such as If, Else, and Else If. While you may have figured
    out what these mean, this short activity may help differentiate them!</p>
  <p>In the terminal below, An if statement checks the comparison (1===1), if it is true, the console will log "true1"
    Then, an else if statement evaluates (2===2) and returns "true2" if the statement is true, and last, the console
    logs 'done!' Run the program then try the activities below:</p>
  <br>
  <p style='height:130px; overflow-y:scroll; background-color:rgb(228, 217, 255)'>
    1. You may have noticed, even though 2 is equal to 2 (2 === 2), the console does not log 'true2', as it should if a
    conditional if statement evaluates to true. The reason is that the term 'else' implies one or the other. For
    example: John says, 'if it is sunny, bring me a hat, but if it is not sunny and it is raining, bring me an
    umbrella!' In this statement, John gets a hat if it is sunny,but if it is not sunny and it is rainy, he'll get an
    umbrella.<br> you may be asking, what if it is sunny AND raining? Maybe John should have said 'if it is sunny, bring
    me a hat and if it is raining, bring me an umbrella!'<br><br>try changing the 'else if' to 'if' and run the code
    again. What happens?<br><br>2. Notice, now both 'true1' and 'true2' are logged to the console. So what does else do?
    <br> John decides he really likes umbrellas and says:'if it is sunny, bring me a hat, and if it is raining, bring me
    an umbrella, and if it's hailing, bring me an umbrella, and if it's cold, bring me an umbrella, and if it's
    overcast, bring me an umbrella...etc' It seems like what John wants to say is 'if it is not sunny, bring me an
    umbrella' <br><br> Try editing the code so that the final console.log is within an else statement
    (else{console.log('done')}). Run the code. <br><br>Notice that 'done!' is no longer logged to the console. The
    program now reads: IF 1 equals 1, log 'true1', IF 2 equals 2, log 'true2', but if they are not true (ELSE),
    console.log('done!')
  </p><br>
  <div class="parent">
    <pre
      class='preMargin'><code id="editor5" class="Javascript editor" contentEditable="true">if (1 === 1) {<br>  console.log('true1')<br>} else if (2 === 2) {<br>  console.log('true2')<br>};<br>  console.log('done!');<br></code></pre>

    <div class="results" id="result5"></div>

  </div>
  <div style="margin: 0 auto; width: 656px; text-align: center;">
    <br>
    <button class="btn btn-success" id="run5" style="width: 15%">Run</button>
<!--     <button id="clear5" class="btn btn-warning" style="width: 15%">Clear</button> -->
  </div>
  <br>
  <h4>Knowledge Test!</h4>
  <br>
  <p>Create your own if, if, else statement, and log to the console 'true' [console.log("true")] if the statement is
    true! Make the conditionals so that TWO comparisons evaluate to true (this means two 'true's should log to the
    console).</p>
  <div class="parent">
    <pre
      class='preMargin'><code id="editor6" class="Javascript editor" contentEditable="true"><br><br><br><br><br><br><br><br></code></pre>
<!--     if (1 === 1){<br>  console.log('true')<br>} if (2 === 2) {<br>  console.log('true')<br>} else {<br>  console.log('true')<br>};<br> -->

    <div class="results" id="result6"></div>

  </div>
  <div style="margin: 0 auto; width: 656px; text-align: center; padding-bottom:2rem;">
    <br>
    <button class="btn btn-success" id="run6" style="width: 15%">Run</button>
    <button class="btn btn-success" id="grade" style="width: 15%">Grade</button>
    <!--   <button id="clear6" class="btn btn-warning" style="width: 15%">Clear</button> -->
  </div>
</body>

<footer style="padding-top:1rem; padding-bottom:1.5rem; background:lightgrey;">
  <div class="container" style="text-align: center;">
    <a class="text-primary" href="index.html">
      <h5>Home 🏠</h5>
    </a>
    <a class="text-primary" href="">
      <h6>Back to top 🔝</h6>
    </a>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.9.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>



<script>

  function resizeEditor() {
    var divs = document.getElementsByClassName("results");
    for (var i = 0; i < divs.length; i++) {
      console.log(divs[i].style.height);
      console.log(divs[i].clientHeight);
      console.log((divs[i].clientHeight - 14) + "px");
      divs[i].style.height = (divs[i].clientHeight - 2) + "px";
    }
  }
  resizeEditor();


  let errorBool = false;
  function getCode(num) {
    console.log(num);
    let result = "result" + num;
    let editor = "editor" + num;
    console.log(editor, result);
    //clear result
    document.getElementById(result).innerHTML = "";
    // console.oldLog = console.log.bind(console);
    // console.log = function(value)
    // {
    //     document.getElementById("result").innerHTML += value + "<br>";
    //     console.oldLog(value);
    //     return value;
    // };

    //prevent eval if gl
    // var code = document.getElementById("editor").innerHTML.replace(/<span.*?>/g, "").replace(/<\/span>/g, "") + document.getElementById("editor").innerHTML.replace(/<span.*?>/g, "").replace(/<\/span>/g, "");
    //replace all the div tags in code with nothing

    //TODO: maybe add back
    var code = document.getElementById(editor).innerHTML;
    console.log(code);
    //remove html tags before parsing and executing
    code = code.replace(/<span.*?>/g, "").replace(/<\/span>/g, "");
    code = code.replace(/<div.*?>/g, "").replace(/<\/div>/g, "");
    code = code.replace(/<pre.*?>/g, "").replace(/<\/pre>/g, "");
    code = code.replace(/<code.*?>/g, "").replace(/<\/code>/g, "");
    code = code.replace(/font.*?>/g, "").replace(/<\/font>/g, "");
    code = code.replace(/<br>/g, "");


    //errors wehn using boolean statements
    //replace all html tags with nothing
    // code = code.replace(/<.*?>/g, "");

    //line formatting
    //comvert &gt; to > and &lt; to < and &amp; to & and &quot; to " and &apos; to "' and &nbsp; to " " and &#xA; to "\n" and &#xD; to "\r" and &#x9; to "\t"
    code = code.replace(/&gt;/g, ">").replace(/&lt;/g, "<").replace(/&amp;/g, "&").replace(/&quot;/g, "\"").replace(/&apos;/g, "'").replace(/&nbsp;/g, " ").replace(/&#xA;/g, "\n").replace(/&#xD;/g, "\r").replace(/&#x9;/g, "\t");
    //add new line after every } or{
    code = code.replace(/{/g, "{\n");
    code = code.replace(/}/g, "}\n");
    //add a new line after every ;
    code = code.replace(/;/g, ";\n");

    code = Babel.transform(code, {'presets': ['es2015']}).code;

    console.log('converted code: \n ', code);
    // console.log(code.substr(15))
    // alert(code);



    var initFunc = function (interpreter, globalObject) {
      // Create 'console' global object.
      var pseudoConsole = interpreter.nativeToPseudo({});
      interpreter.setProperty(globalObject, 'console', pseudoConsole);

      // Define 'console.log' function.
      var wrapper = function log(value) {
        document.getElementById(result).innerHTML += value + "<br>";
        return console.log('value', value);
      };
      interpreter.setProperty(pseudoConsole, 'log',
        interpreter.createNativeFunction(wrapper));
    };
    try {
      var myInterpreter = new Interpreter(code, initFunc);

      myInterpreter.run();
      errorBool = false;
      // console.log('executed');
    }
    catch (e) {
      document.getElementById(result).innerHTML = e.toString();
      console.log('result', e);
      errorBool = true;
    }

  }



  document.getElementById("run1").addEventListener("click", function () {
    console.log('click1');
    getCode(1);
  });

  // document.getElementById("clear1").addEventListener("click", function() {
  //     document.getElementById("result1").innerHTML = "";
  //   document.getElementById("editor1").innerHTML = "";
  //   resizeEditor();
  // });

  document.getElementById("run2").addEventListener("click", function () {
    console.log('click2');
    getCode(2);
  });

  document.getElementById("run3").addEventListener("click", function () {
    console.log('click3');
    getCode(3);
  });

  document.getElementById("run4").addEventListener("click", function () {
    console.log('click4');
    getCode(4);
  });

  document.getElementById("run5").addEventListener("click", function () {
    console.log('click5');
    getCode(5);
  });

  document.getElementById("run6").addEventListener("click", function () {
    console.log('click6');
    getCode(6);
  });

  document.getElementById("grade").addEventListener("click", function () {
    console.log('click6');
    getCode(6);
    setTimeout(() => {
      console.log(errorBool);
      console.log(grade());
      if (!errorBool && grade()) {
        increaseLevel()
        alert("level completed");
      }
    }, 1000);

  });

  /* solution code: 
  
if (1 === 1){
  console.log('true')
} if (2 === 2) {
  console.log('true')
} else {
  console.log('true')
};
  */

  function grade() {
    var code = document.getElementById('editor6').innerHTML;
    let countConsole = (code.match(/console.log/g) || []).length
    var consolex = document.getElementById('result6').innerHTML;
    console.log(consolex);
    console.log((consolex.match(/true/g) || []));
    let countTrue = (consolex.match(/true/g) || []).length;
    console.log(countTrue);
    // let countConsole = (code.match(/console.log/g) || []).length;
    if (countTrue == 2 && countConsole >= 3) {
      return true;
    }
    else {
      return false;
    }
  }


  // document.getElementById("clear2").addEventListener("click", function() {
  //     document.getElementById("result2").innerHTML = "";
  //   document.getElementById("editor2").innerHTML = "";
  //   resizeEditor();
  // });


  const firebaseConfig = {
    apiKey: "AIzaSyDeaWpE9wc6VvPEilrEAqhEnjKo8ik1Stw",
    authDomain: "cssifinal-884f2.firebaseapp.com",
    projectId: "cssifinal-884f2",
    storageBucket: "cssifinal-884f2.appspot.com",
    messagingSenderId: "331915175322",
    appId: "1:331915175322:web:ab968dfdccc693e2094623",
    measurementId: "G-LB249TWWMB"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();
  function increaseLevel() {
    firebase.auth().onAuthStateChanged((user) => {
      if (user) {
        console.log("logged in");
        async function updateLevel() {

          let user = firebase.auth().currentUser;
          let userID = user.uid;
          let docRef = db.collection("user-data").doc(userID);
          let doc = await docRef.get();
          var data = "";
          if (doc.exists) {
            data = doc.data().level;
            console.log(data);
          }
          if (data == 3) {
            let newLevel = docRef.update({level: data + 1});
            console.log(newLevel);
          }


        }

        updateLevel();

      }
      else {
        console.log("logged out");
      }
    });
  }
  //call this lien to increase level by
  // increaseLevel();

  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
      console.log("logged in");
      var data = "";
      async function getLevel() {

        let user = firebase.auth().currentUser;
        let userID = user.uid;
        let docRef = db.collection("user-data").doc(userID);
        let doc = await docRef.get();

        if (doc.exists) {
          data = doc.data().level;
          console.log(data);

          if (data < 3) {
            console.log("no access");
            window.location.href = "progression.html";
          }
          document.body.style.display = "block";

        }
      }
      getLevel();

  async function getData() {
        var user = firebase.auth().currentUser;
        var userID = user.uid;
        var docRef = db.collection("user-data").doc(userID);
        var doc = await docRef.get();
        if (doc.exists) {
          role = doc.data().role;
          console.log(role);

          // document.getElementById("studentNav").style.display = "none";
          // document.getElementById("teachersNav").style.display = "none";

          console.log(role);

          if (role == "Demo") {
            console.log('Demo');
            document.getElementById("studentNav").style.display = "block";
            document.getElementById("teachersNav").style.display = "block";
            document.getElementById('link').href = 'progression.html';
            document.getElementById('link').innerHTML = "Student Page";
          }
          else if (role == "Teacher") {
            console.log('teacher');
            document.getElementById("studentNav").style.display = "block";
            document.getElementById("teachersNav").style.display = "block";
            document.getElementById('link').href = 'teachers.html';
            document.getElementById('link').innerHTML = "Teacher Page";
          }
          else {
            console.log('student');
            document.getElementById("studentNav").style.display = "block";
            document.getElementById("teachersNav").style.display = "none";
            document.getElementById('link').href = 'progression.html';
            document.getElementById('link').innerHTML = "Student Page";
          }
        }
      }
      getData();
      console.log(document.body.style.display);
      document.body.style.display = "block";
      console.log(document.body.style.display);
      document.getElementById("account").href = "loggedin.html";
      document.getElementById("account").innerHTML = '<span style="color: black">My Account</span>';

      
    }
    else {
      window.location.href = "index.html";
      console.log("logged out");
    }
  });

</script>

</html>